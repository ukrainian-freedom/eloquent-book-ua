{{meta {load_files: [«code/intro.js»]}}}

# Вступ

{{quote {author: «Ellen Ullman», title: «Close to the Machine: 

Ми думаємо, що створюємо систему для власних цілей. Ми віримо, що створюємо її за своїм образом і подобою... Але комп'ютер насправді не схожий на нас. Це проекція дуже тонкої частини нас самих: тієї частини, яка присвячена логіці, порядку, правилам і ясності.

quote}}

{{figure {url: «img/chapter_picture_00.jpg», alt: «Ілюстрація викрутки поруч з друкованою платою приблизно такого ж розміру», »chapter: «Обрамлення"}}}.

Це книжка про те, як навчити ((комп'ютер))у. Комп'ютери сьогодні так само поширені, як і викрутки, але вони набагато складніші, і змусити їх робити те, що ви хочете, не завжди легко.

Якщо завдання, яке ви ставите перед комп'ютером, є звичайним, добре зрозумілим, наприклад, показати вам вашу електронну пошту або працювати як калькулятор, ви можете відкрити відповідний ((додаток)) і приступити до роботи. Але для унікальних або нестандартних завдань часто не існує відповідної програми.

Саме тут на допомогу може прийти ((програмування)). Програмування - це процес створення «програми» - набору точних інструкцій, які вказують комп'ютеру, що робити. Оскільки комп'ютери - тупі, педантичні тварини, програмування в принципі є нудним і неприємним заняттям.

{{index [програмування, «радість від»], швидкість}}

На щастя, якщо ви можете змиритися з цим фактом - і, можливо, навіть насолоджуватися строгістю мислення в термінах, з якими можуть мати справу німі машини - програмування може бути корисним. Воно дозволяє вам робити речі за секунди, на які вручну пішла б _вічність_. Це спосіб змусити комп'ютерний інструмент робити те, що він не міг робити раніше. Крім того, це чудова гра для розв'язування головоломок та абстрактного мислення.

Більшість програм виконується за допомогою ((мови програмування)). Мова програмування - це штучно створена мова, яка використовується для навчання комп'ютерів. Цікаво, що найефективніший спосіб спілкування з комп'ютером, який ми знайшли, значною мірою запозичений з того, як ми спілкуємося один з одним. Як і людські мови, комп'ютерні мови дозволяють комбінувати слова та фрази у нові способи, що дає змогу виражати все нові й нові поняття.

{{index [JavaScript, «доступність»], «випадкові обчислення»}}

У якийсь момент мовні інтерфейси, такі як підказки BASIC і DOS 1980-х і 1990-х років, були основним методом взаємодії з комп'ютером. Для повсякденного використання комп'ютера вони були значною мірою замінені візуальними інтерфейсами, які легше вивчити, але вони пропонують менше свободи. Але якщо ви знаєте, де шукати, мови все ще існують. Одна з них, _JavaScript_, вбудована в кожен сучасний веб-браузер - і тому доступна майже на кожному пристрої.

{{indexsee «веб-браузер», браузер}}

У цій книжці ми спробуємо познайомити вас з цією мовою настільки, щоб ви могли робити з нею корисні та цікаві речі.

## Про програмування

{{index [programming, «difficulty of»]}}

Окрім пояснення JavaScript, я познайомлю вас з основними принципами програмування. Програмувати, виявляється, складно. Фундаментальні правила прості і зрозумілі, але програми, побудовані на основі цих правил, мають тенденцію ставати досить складними, щоб вводити свої власні правила і складності. Ви будуєте власний лабіринт, і в ньому легко загубитися.

{{індекс навчання}}

Будуть моменти, коли читання цієї книги буде викликати жахливе розчарування. Якщо ви новачок у програмуванні, вам доведеться засвоїти багато нового матеріалу. Значна частина цього матеріалу буде _поєднана_ таким чином, що вам доведеться встановлювати додаткові зв'язки.

Ви повинні докласти необхідних зусиль. Коли вам буде важко слідувати за книгою, не робіть поспішних висновків щодо власних можливостей. З вами все гаразд - вам просто потрібно продовжувати. Зробіть перерву, перечитайте матеріал і переконайтеся, що ви прочитали і зрозуміли приклади програм і вправ. Навчання - це важка праця, але все, чого ви навчилися, належить вам і полегшить подальше навчання.

{{цитата {автор: «Урсула К. Ле Ґуїн», назва: «Ліва рука темряви"}}

{{індекс «Ле Ґуїн, Урсула К.»}}

Коли дія стає невигідною, збирайте інформацію; коли інформація стає невигідною, спіть.

quote}}

{{індекс [програма, «природа»], дані}}

Програма - це багато речей. Це шматок тексту, набраний програмістом, це керуюча сила, яка змушує комп'ютер робити те, що він робить, це дані в пам'яті комп'ютера, і, в той же час, вона керує діями, що виконуються над цією пам'яттю. Аналогії, які намагаються порівняти програми зі знайомими об'єктами, як правило, виявляються невдалими. Поверхнево підходящою аналогією є порівняння програми з машиною - в ній задіяно багато окремих частин, і для того, щоб змусити ціле працювати, ми повинні розглянути способи, якими ці частини взаємопов'язані між собою і сприяють роботі цілого.

Комп'ютер - це фізична машина, яка діє як хост для цих нематеріальних машин. Самі по собі комп'ютери можуть робити лише тупо прості речі. Причина їхньої корисності полягає в тому, що вони роблять ці речі на неймовірно високій швидкості. Програма може геніально комбінувати величезну кількість цих простих дій, щоб робити дуже складні речі.

{{index [програмування, «радість»]}}

Програма - це будівля думки. Її створення не потребує витрат, вона невагома, і вона легко росте під нашими руками, що набирають текст. Але зі зростанням програми зростає і її ((складність)). Вміння програмувати - це вміння створювати програми, які не збивають програміста з пантелику. Найкращі програми - це ті, яким вдається робити щось цікаве, але при цьому бути простими для розуміння.

{{індекс «стиль програмування», «найкращі практики»}}

Деякі програмісти вважають, що з цією складністю найкраще впоратися, використовуючи у своїх програмах лише невеликий набір добре зрозумілих прийомів. Вони склали суворі правила («найкращі практики»), що визначають, якою має бути форма програм, і ретельно дотримуються їхньої безпечної маленької зони.

{{індексний експеримент}}

Це не тільки нудно - це неефективно. Нові проблеми часто вимагають нових рішень. Сфера програмування молода і все ще стрімко розвивається, і вона досить різноманітна, щоб мати місце для дико різних підходів. При розробці програм можна припуститися багатьох жахливих помилок, і вам варто спробувати зробити їх хоча б раз, щоб зрозуміти їх. Відчуття того, як виглядає хороша програма, розвивається з практикою, а не з переліком правил.

## Чому мова має значення

{{index «мова програмування», «машинний код», «двійкові дані»}}

На початку, на зародженні обчислювальної техніки, не існувало жодних мов програмування. Програми виглядали приблизно так:

```{lang: null}
00110001 00000000 00000000
00110001 00000001 00000001
00110011 00000001 00000010
01010001 00001011 00000010
00100010 00000010 00001000
01000011 00000001 00000000
01000001 00000001 00000001
00010000 00000010 00000000
01100010 00000000 00000000
```

{{index [програмування, «історія»], «перфокарта», складність}}

Це програма, яка додає числа від 1 до 10 і виводить результат: `1 + 2 + ... + 10 = 55`. Вона могла працювати на простій гіпотетичній машині. Для програмування ранніх комп'ютерів потрібно було встановлювати великі масиви перемикачів у потрібне положення або пробивати отвори в смужках картону і подавати їх до комп'ютера. Можна уявити, наскільки нудною і схильною до помилок була ця процедура. Навіть написання простих програм вимагало великої кмітливості та дисципліни. Складні були майже немислимі.

{{index bit, «wizard (mighty)»}}

Звичайно, ручне введення цих таємничих бітів (одиниць і нулів) давало програмісту глибоке відчуття того, що він є могутнім чарівником. А це, мабуть, чогось варте з точки зору задоволення від роботи.

{{індексна пам'ять, інструкція}}

Кожен рядок попередньої програми містить одну інструкцію. Англійською мовою її можна записати так:

 1. Зберегти число 0 у комірці пам'яті 0.
 2. Записати число 1 в комірку 1.
 3. Записати значення комірки 1 у комірку 2.
 4. Від значення в комірці 2 відняти число 11.
 5. Якщо значення в комірці 2 дорівнює числу 0, продовжити виконання інструкції 9.
 6. Додати значення комірки 1 до комірки 0.
 7. До значення комірки 1 додати число 1.
 8. Продовжити з інструкції 3.
 9. Вивести значення комірки 0.

{{читабельність індексів, іменування, зв'язування}}

Хоча це вже більш читабельно, ніж суп з бітів, але все ще досить незрозуміло. Використання імен замість чисел для інструкцій та комірок пам'яті допомагає.

```{lang: «null"}
  Встановіть «total» у 0.
  Встановіть «count» рівним 1.
[loop]
  Встановити «compare» рівним «count».
  Відняти 11 від «compare».
  Якщо «compare» дорівнює 0, продовжити з [end].
  Додати «count» до «total».
  Додати 1 до «count».
  Продовжуйте з [цикл].
[end]
  Вивести «total».
```

{{індексний цикл, стрибок, «приклад підбиття підсумків»}}

Чи бачите ви, як працює програма на цьому етапі? Перші два рядки надають двом коміркам пам'яті початкові значення: `total` буде використано для накопичення результату обчислень, а `count` буде відстежувати число, на яке ми зараз дивимося. Рядки з використанням `compare`, мабуть, найбільш заплутані. Програма хоче побачити, чи дорівнює `count` 11, щоб вирішити, чи можна зупинити виконання. Оскільки наша гіпотетична машина досить примітивна, вона може перевірити лише те, чи дорівнює число нулю, і прийняти рішення на основі цього. Тому вона використовує комірку пам'яті з міткою `compare` для обчислення значення `count - 11` і приймає рішення на основі цього значення. Наступні два рядки додають значення `count` до результату і збільшують `count` на 1 кожного разу, коли програма вирішує, що `count` ще не дорівнює 11.

Ось та сама програма на JavaScript:

```
let total = 0, count = 1;
while (count <= 10) {
  total += count;
  count += 1;
}
console.log(total);
// → 55
```

{{index «while loop», loop, [дужки, блок]}}

Ця версія дає нам ще декілька покращень. Найголовніше, більше не потрібно вказувати спосіб, яким ми хочемо, щоб програма стрибала туди-сюди - про це подбає конструкція `while`. Вона продовжує виконувати блок (взятий у фігурні дужки) під нею доти, доки виконується умова, яку їй було задано. Цією умовою є `count <= 10`, що означає «кількість елементів менше або дорівнює 10». Нам більше не потрібно створювати тимчасове значення і порівнювати його з нулем, що було просто нецікавою деталлю. Частина сили мов програмування полягає в тому, що вони можуть подбати про нецікаві деталі за нас.

{{index «console.log»}}

В кінці програми, після завершення роботи конструкції `while`, операція `console.log` використовується для виведення результату.

{{індекс «функція суми», «функція діапазону», абстракція, функція}}

Нарешті, ось як могла б виглядати програма, якби у нас були доступні зручні операції `range` та `сума`, які відповідно створюють ((колекцію)) чисел у діапазоні та обчислюють суму колекції чисел:

```{startCode: true}
console.log(sum(range(1, 10)));
// → 55
```

{{index readability}}

Мораль цієї історії полягає в тому, що одну і ту ж програму можна виразити і довгим, і коротким, і нечитабельним, і читабельним способом. Перша версія програми була вкрай незрозумілою, тоді як ця остання майже англійська: `log` суму `діапазону` чисел від 1 до 10. (Ми побачимо у [наступних розділах](дані), як визначати такі операції, як `сума` та `діапазон`).

{{index [«мова програмування», «потужність»], компонованість}}

Хороша мова програмування допомагає програмісту, дозволяючи йому говорити про дії, які має виконувати комп'ютер, на більш високому рівні. Вона допомагає опустити деталі, надає зручні будівельні блоки (такі як `while` і `console.log`), дозволяє визначати власні будівельні блоки (такі як `сума` і `діапазон`), і робить ці блоки легкими для компонування.

## Що таке JavaScript?

{{index history, Netscape, браузер, «веб-додаток», JavaScript, [JavaScript, «історія»], «World Wide Web»}}

{{indexsee WWW, «World Wide Web»}}

{{indexsee Web, «World Wide Web»}}

JavaScript було введено в 1995 році як спосіб додавання програм до веб-сторінок у браузері Netscape Navigator. З тих пір мова була прийнята всіма іншими основними графічними веб-браузерами. Вона зробила можливими сучасні веб-додатки - тобто додатки, з якими можна взаємодіяти безпосередньо, не перезавантажуючи сторінку для кожної дії. JavaScript також використовується на більш традиційних веб-сайтах для забезпечення різних форм інтерактивності та інтелектуальності.

{{індекс Java, іменування}}

Важливо зазначити, що JavaScript не має майже нічого спільного з мовою програмування Java. Подібна назва була натхненна маркетинговими міркуваннями, а не здоровим глуздом. Коли з'явився JavaScript, мова Java інтенсивно рекламувалася і набувала популярності. Хтось подумав, що це гарна ідея - спробувати скористатися цим успіхом. Тепер ми застрягли з назвою.

{{індекс ECMAScript, сумісність}}

Після прийняття мови JavaScript за межами Netscape був написаний ((стандартний)) документ, який описує, як повинна працювати мова JavaScript, щоб різні частини програмного забезпечення, які стверджували, що підтримують JavaScript, могли переконатися, що вони насправді надають ту саму мову. Цей стандарт називається ECMAScript, на честь організації Ecma International, яка проводила стандартизацію. На практиці терміни ECMAScript і JavaScript можна використовувати як взаємозамінні - це дві назви однієї мови.

{{index [JavaScript, «слабкі сторони»], налагодження}}

Є люди, які говорять про JavaScript «жахливі» речі. Багато з цих речей є правдою. Коли мені вперше довелося написати щось на JavaScript, я швидко почав його зневажати. Вона приймала майже все, що я вводив, але інтерпретувала це зовсім не так, як я мав на увазі. Звісно, це багато в чому було пов'язано з тим, що я не мав жодного уявлення про те, що я робив, але тут є реальна проблема: JavaScript є до смішного ліберальним у тому, що він дозволяє. Ідея цього дизайну полягала в тому, що він полегшить програмування на JavaScript для початківців. Насправді, це здебільшого ускладнює пошук проблем у ваших програмах, оскільки система не вказує вам на них.

{{index [JavaScript, «гнучкість»], flexibility}}

Однак ця гнучкість також має свої переваги. Вона залишає місце для прийомів, які неможливі у більш жорстких мовах, і створює приємний, неформальний стиль програмування. Після ((вивчення)) належного вивчення мови і роботи з нею деякий час, я прийшов до висновку, що мені насправді _подобається_ JavaScript.

{{index future, [JavaScript, «версії»], ECMAScript, «ECMAScript 6»}}

Існувало кілька версій JavaScript. ECMAScript версії 3 була широко підтримуваною версією під час сходження JavaScript до домінування, приблизно між 2000 і 2010 роками. У цей час велася робота над амбітною версією 4, яка планувала ряд радикальних поліпшень і розширень мови. Змінювати живу, широко використовувану мову таким радикальним чином виявилося політично складно, і роботу над версією 4 було припинено у 2008 році. Набагато менш амбітна версія 5, що містила лише деякі безперечні покращення, вийшла у 2009 році. У 2015 році вийшла версія 6, велике оновлення, яке включало деякі ідеї, заплановані для версії 4. З тих пір ми маємо нові, невеликі оновлення щороку.

Той факт, що JavaScript розвивається, означає, що браузери повинні постійно йти в ногу з ним. Якщо ви використовуєте старіший браузер, він може не підтримувати всі функції. Розробники мови намагаються не вносити жодних змін, які могли б зламати існуючі програми, тому нові браузери все ще можуть запускати старі програми. У цій книзі я використовую версію JavaScript 2024 року.

{{index [JavaScript, «uses of»]}}

Веб-браузери - не єдині платформи, на яких використовується JavaScript. Деякі бази даних, такі як MongoDB і CouchDB, використовують JavaScript як мову сценаріїв і запитів. Декілька платформ для десктопного та серверного програмування, зокрема проект ((Node.js)) (тема [Розділ ?](node)), надають середовище для програмування на JavaScript поза браузером.

## Код і що з ним робити

{{індекс «читання коду», «запис коду»}}

Код - це текст, з якого складаються програми. Більшість розділів цієї книги містять досить багато коду. Я вважаю, що читання коду і написання ((коду)) є невід'ємними частинами ((навчання)) програмування. Намагайтеся не просто переглядати приклади - читайте їх уважно і розумійте. Спочатку це може бути повільно і заплутано, але я обіцяю, що ви швидко освоїтеся. Те саме стосується і вправ. Не вважайте, що ви їх зрозуміли, доки не напишете робочий розв'язок.

{{інтерпретація індексів}}

Я рекомендую вам спробувати свої розв'язки вправ у справжньому інтерпретаторі JavaScript. Таким чином, ви отримаєте негайний зворотній зв'язок про те, чи працює те, що ви робите, і, сподіваюся, у вас з'явиться спокуса ((поекспериментувати)) і вийти за рамки вправ.

{{якщо інтерактивний

Якщо ви читаєте цю книгу у браузері, ви можете редагувати (і запускати) всі приклади програм, клацаючи на них.

if}}

{{if книга

{{індекс завантаження, пісочниця, «виконуваний код»}}

Найпростіший спосіб запустити приклад коду з книги - і поекспериментувати з ним - це знайти його в онлайн-версії книги за адресою [https://eloquentjavascript.net_](https://eloquentjavascript.net/). Там ви можете натиснути на будь-який приклад коду, щоб відредагувати його, запустити і побачити результати, які він видає. Для роботи над вправами перейдіть на [_https://eloquentjavascript.net/code_](https://eloquentjavascript.net/code), де ви знайдете початковий код для кожної вправи і зможете переглянути розв'язки.

if}}

{{index «tools for developer», «JavaScript console»}}

Запуск програм, описаних у цій книзі, за межами веб-сайту книги вимагає певної обережності. Багато прикладів є самостійними і повинні працювати у будь-якому середовищі JavaScript. Але код у наступних розділах часто написаний для конкретного середовища (браузера або Node.js) і може працювати тільки там. Крім того, багато глав визначають більші програми, і фрагменти коду, які в них з'являються, залежать один від одного або від зовнішніх файлів. У [пісочниці] (https://eloquentjavascript.net/code) на сайті є посилання на ZIP-файли, що містять усі скрипти та файли даних, необхідні для запуску коду певної глави.

## Огляд цієї книги

Ця книга складається приблизно з трьох частин. У перших 12 розділах розглядається мова JavaScript. Наступні сім розділів присвячені веб-браузерам і тому, як JavaScript використовується для їхнього програмування. Нарешті, дві глави присвячені ((Node.js)), ще одному середовищу для програмування на JavaScript. У книзі є п'ять "проектних розділів », які описують великі приклади програм, щоб дати вам змогу відчути смак справжнього програмування.

Мовна частина книги починається з чотирьох розділів, які знайомлять з базовою структурою мови JavaScript. У них обговорюються [керуючі структури] (program_structure) (наприклад, слово while, яке ви бачили у цьому вступі), [функції] (functions) (написання ваших власних будівельних блоків) і [структури даних] (data). Після цього ви зможете писати базові програми. Далі у розділах [?](вищий_порядок) та [?](об'єкт) ви дізнаєтесь про методи використання функцій та об'єктів для написання більш _абстрактного_ коду та контролю над складністю.

Після [першого розділу проекту](робот), в якому створюється грубий робот-доставщик, мовна частина книги продовжується розділами про [обробку помилок і виправлення помилок](помилки), [регулярні вирази](regexp) (важливий інструмент для роботи з текстом), [модульність](модулі) (ще один захист від складності) та [асинхронне програмування](асинхрон) (робота з подіями, які потребують часу). Завершує першу частину книги [другий розділ проекту] (мова), де ми реалізуємо мову програмування.

Друга частина книги, розділи від [?](браузер) до [?](paint), описує інструменти, до яких має доступ браузерний JavaScript. Ви навчитеся відображати об'єкти на екрані (розділи [?](dom) і [?](canvas)), реагувати на введення користувача ([Розділ ?](event)) і спілкуватися через мережу ([Розділ ?](http)). У цій частині знову дві глави проекту: створення [платформної гри] (game) та [програми для малювання пікселів] (paint).

[Глава ?](node) описує Node.js, а [Глава ?](skillsharing) створює невеликий веб-сайт за допомогою цього інструменту.

{{якщо реклама

Нарешті, [Глава ?](fast) описує деякі міркування, які виникають при оптимізації JavaScript-програм для швидкості.

if}}

## Типографічні домовленості

{{index «факторіальна функція»}}

У цій книзі текст, написаний шрифтом `моноширинним`, представлятиме елементи програм. Іноді це самодостатні фрагменти, а іноді вони просто посилаються на частину сусідньої програми. Програми (деякі з яких ви вже бачили) записуються наступним чином:

```
function factorial(n) {
  if (n == 0) {
    повернути 1;
  } else {
    return factorial(n - 1) * n;
  }
}
```

{{index «console.log»}}

Іноді, щоб показати вивід, який видає програма, після неї записують очікуваний вивід, з двома скісними рисками та стрілкою попереду.

```
console.log(factorial(8));
// → 40320
```

Бажаємо успіхів!
